{"componentChunkName":"component---src-templates-blog-post-js","path":"/npm-bin-issue/","result":{"data":{"site":{"siteMetadata":{"title":"Canhua's Blog"}},"markdownRemark":{"id":"d02a6bdf-17dc-52dd-876b-0c1db0b3a861","excerpt":"Do you believe  #!/usr/bin/env node will impact the npm shortcut on Windows?\r\nYes, it did. I created npmjs clang-format-launcher package, and I expect to run itâ€¦","html":"<p>Do you believe <code> #!/usr/bin/env node</code> will impact the npm shortcut on Windows?\r\nYes, it did.</p>\n<p>I created npmjs <a href=\"https://github.com/licanhua/clang-format-launcher\">clang-format-launcher</a> package, and I expect to run it with <code>npx clang-format-launcher</code> or <code>clang-format-launcher</code>, then I run into\r\n<img src=\"./issue.png\" alt=\"Microsoft JScript compilation error\">.</p>\n<p>The error message:</p>\n<pre><code>Error: Expected identifier\r\ncode: 800A03F2\r\nSource: Microsoft JScript compilation error\n</code></pre>\n<p>If I run with <code>node node_modules\\clang-format-launcher\\dist\\index.js</code>, then everything looks good.</p>\n<p>I spent half an hour to investigate it, finally I found that the clang-format-launcher.bat is not emitted correct.</p>\n<p>It's</p>\n<pre><code>\"%~dp0\\node_modules\\clang-format-launcher\\dist\\index.js\"   %*\n</code></pre>\n<p>but it should be</p>\n<pre><code>@IF EXIST \"%~dp0\\node.exe\" (\r\n  \"%~dp0\\node.exe\"  \"%~dp0\\node_modules\\clang-format-launcher\\dist\\index.js\" %*\r\n) ELSE (\r\n  node  \"%~dp0\\node_modules\\clang-format-launcher\\dist\\index.js\" %*\r\n)\n</code></pre>\n<p>After I revisit the document\r\n<a href=\"https://docs.npmjs.com/cli/v6/configuring-npm/package-json#bin\">package bin</a>,</p>\n<blockquote>\n<p>Please make sure that your file(s) referenced in bin starts with #!/usr/bin/env node, otherwise the scripts are started without the node executable!</p>\n</blockquote>","frontmatter":{"title":"'Microsoft JScript compilation error' when running npx","date":"December 04, 2021","description":"bin field in your package.json which is a map of command name to local file name. which doesn't work if you are mssing #!/usr/bin/env node"}},"previous":{"fields":{"slug":"/gatsby-profile-issue/"},"frontmatter":{"title":"Issue of mixing @wkocjan/gatsby-theme-intro with gatsby-starter-blog"}},"next":{"fields":{"slug":"/js-data-structure/"},"frontmatter":{"title":"JavaScript Data Structures and Algorithm Snapshot"}}},"pageContext":{"id":"d02a6bdf-17dc-52dd-876b-0c1db0b3a861","previousPostId":"799a7009-1138-5001-b9dd-937c66ee7937","nextPostId":"f7fa4e12-0bd5-5639-a51f-972a5e6c8009"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}